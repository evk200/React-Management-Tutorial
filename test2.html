<!DOCTYPE>
<html>
    <head>
        <meta charset="UTF-8"/>
        <title>테스트</title>
    </head>
    <body>
        <div id="map" style="width:455px;height:400px;"></div>
        <div>
            <ul>시·도 별 일일 확진자 수
                <li><script></script></li>
            </ul>
        </div>
        <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
        <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=c8ec0b97d55482757af9dc7294cf060f"></script>
        <script>
            var container = document.getElementById('map'); //지도를 담을 영역의 DOM 레퍼런스
            var options = { //지도를 생성할 때 필요한 기본 옵션
                center: new kakao.maps.LatLng(36.206896175059406, 127.96303879876369), //지도의 중심좌표.
                level: 13 //지도의 레벨(확대, 축소 정도)
            };
            var map = new kakao.maps.Map(container, options); //지도 생성 및 객체 리턴
            
            var positions = [
                {
                    title: '서울', 
                    latlng: new kakao.maps.LatLng(37.54925878910763, 126.95961176874968)
                },
                {
                    title: '경기', 
                    latlng: new kakao.maps.LatLng(37.08631150018431, 126.97353532134325)
                },
                {
                    title: '대구', 
                    latlng: new kakao.maps.LatLng(35.90391944089139, 128.5846306899788)
                },
                {
                    title: '인천',
                    latlng: new kakao.maps.LatLng(37.39946840228727, 126.63804441498034)
                },
                {
                    title: '부산', 
                    latlng: new kakao.maps.LatLng(35.16746696438281, 129.07593018792105)
                },
                {
                    title: '경남', 
                    latlng: new kakao.maps.LatLng(35.46223487751278, 128.48568123717055)
                },
                {
                    title: '경북', 
                    latlng: new kakao.maps.LatLng(36.393288292855324, 128.5602695239652)
                },
                {
                    title: '충남', 
                    latlng: new kakao.maps.LatLng(36.20046116613137, 126.99660865989294)
                },
                {
                    title: '강원', 
                    latlng: new kakao.maps.LatLng(37.46501729752135, 128.44338470806102)
                },
                {
                    title: '대전', 
                    latlng: new kakao.maps.LatLng(36.31981042830554, 127.38431624204443)
                },
                {
                    title: '충북', 
                    latlng: new kakao.maps.LatLng(36.76966759476971, 127.83385656261297)
                },
                {
                    title: '광주', 
                    latlng: new kakao.maps.LatLng(35.212856793045205, 126.85044673941253)
                },
                {
                    title: '울산', 
                    latlng: new kakao.maps.LatLng(35.54151487996512, 129.31131678884756)
                },
                {
                    title: '전북', 
                    latlng: new kakao.maps.LatLng(35.71111203025698, 127.23426519732908)
                },
                {
                    title: '전남', 
                    latlng: new kakao.maps.LatLng(35.091825836807665, 127.52445260053801)
                },
                {
                    title: '제주', 
                    latlng: new kakao.maps.LatLng(33.430535369602936, 126.55627630735526)
                },
                {
                    title: '세종', 
                    latlng: new kakao.maps.LatLng(36.624713328513515, 127.236999917502)
                }
            ];

            // 마커 이미지의 이미지 주소입니다
            var imageSrc = "\maps.png"; 
                
            for (var i = 0; i < positions.length; i ++) {
                
                // 마커 이미지의 이미지 크기 입니다
                var imageSize = new kakao.maps.Size(20, 30); 
                
                // 마커 이미지를 생성합니다    
                var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize); 
                
                // 마커를 생성합니다
                var marker = new kakao.maps.Marker({
                    map: map, // 마커를 표시할 지도
                    position: positions[i].latlng, // 마커를 표시할 위치
                    image : markerImage // 마커 이미지 
                });

                // 마커에 표시할 인포윈도우를 생성합니다 
                var infowindow = new kakao.maps.InfoWindow({
                    content: positions[i].title + ' 일일 확진자 :' // 인포윈도우에 표시할 내용
                });

                // 마커에 mouseover 이벤트와 mouseout 이벤트를 등록합니다
                // 이벤트 리스너로는 클로저를 만들어 등록합니다 
                // for문에서 클로저를 만들어 주지 않으면 마지막 마커에만 이벤트가 등록됩니다
                kakao.maps.event.addListener(marker, 'mouseover', makeOverListener(map, marker, infowindow));
                kakao.maps.event.addListener(marker, 'mouseout', makeOutListener(infowindow));
            }
            // 인포윈도우를 표시하는 클로저를 만드는 함수입니다 
            function makeOverListener(map, marker, infowindow) {
                return function() {
                    infowindow.open(map, marker);
                };
            }

            // 인포윈도우를 닫는 클로저를 만드는 함수입니다 
            function makeOutListener(infowindow) {
                return function() {
                    infowindow.close();
                };
            }
        </script>
    </body>
</html>